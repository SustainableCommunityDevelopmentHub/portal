<VirtualHost *:80>
  ServerName local.portal.dev
  DocumentRoot /var/www/portal/client
  FallbackResource /index.html
  ErrorDocument 404 /index.html

  <Directory /var/www/portal/client>
    Options FollowSymLinks
    AllowOverride All

    <RequireAll>
      Require all granted
    </RequireAll>
  </Directory>

  <Directory /var/www/portal/server/server>
    Options FollowSymLinks
    AllowOverride All

    <RequireAll>
    Require all granted
    </RequireAll>
  </Directory>

  WSGIScriptAlias /api /var/www/portal/server/server/wsgi.py
  WSGIPythonPath /var/www/portal/server/
  WSGIPythonHome /var/www/portal/ENV

  <Directory /var/www/portal/server/server>
    <Files wsgi.py>
      Require all granted
    </Files>
  </Directory>

  <IfModule mpm_peruser_module>
    ServerEnvironment apache apache
  </IfModule>

  ErrorLog  ${APACHE_LOG_DIR}/error.log
  CustomLog ${APACHE_LOG_DIR/access.log combined
  Loglevel debug
</VirtualHost>
