<div class="main-body">
  <h3>Search Results</h3>
  <hr class="sr-top">

  <!--Faceted Search sidebar-->
  <div class="left_sidebar_accordion__container" ng-controller="FaqsCtrl">
    <h4>Filter Your Results</h4>
    <a ng-click="clearFacetsAndUpdate()"><span class="glyphicon glyphicon-remove-circle" style="color:red"></span>  Clear all </a>
    <hr class="left_sidebar_hr">
    <div class="left_sidebar_accordion__tab">
      <div class="left_sidebar_accordion__tab-title" ng-click="openTab('type')">
        <i class="glyphicon-plus glyphicon" ng-class="{'glyphicon-minus': isOpenTab('type'), 'glyphicon-plus': !status.open}"></i>
        Type
      </div>
      <div class="left_sidebar_accordion__tab-content" ng-show="isOpenTab('type')">
        <div ng-repeat="facet in facets.type | filter:{active:true}" >
          <input type="checkbox" id="{{ facet.option }}-sidebar" ng-click="toggleFacet(facet)" ng-checked="{{ facet.active }}">
          <label for="{{ facet.option }}-sidebar" class="facet-labels">{{ facet.option }} ({{ facet.count}})
          </label>
        </div>
        <div ng-repeat="facet in facets.type | filter:{active:false} | limitTo: 5" >
          <input type="checkbox" id="{{ facet.option }}-sidebar" ng-click="toggleFacet(facet)" ng-checked="{{ facet.active }}">
          <label for="{{ facet.option }}-sidebar" class="facet-labels">{{ facet.option }} ({{ facet.count}})
          </label>
        </div>
        <div ng-controller="FacetModalCtrl">
          <a ng-click="openFacetModal(facets, 'type')" id="see-all-type">See All</a>
        </div>
      </div>
    </div>
    <hr class="left_sidebar_hr">
    <div class="left_sidebar_accordion__tab">
      <div class="left_sidebar_accordion__tab-title" ng-click="openTab('subject')">
        <i class="glyphicon-plus glyphicon" ng-class="{'glyphicon-minus': isOpenTab('subject'), 'glyphicon-plus': !status.open}"></i>
        Subject
      </div>
      <div class="left_sidebar_accordion__tab-content" ng-show="isOpenTab('subject')">
        <div ng-repeat="facet in facets.subject | filter:{active:true}" >
          <input type="checkbox" id="{{ facet.option }}-sidebar" ng-click="toggleFacet(facet)" ng-checked="{{ facet.active }}">
          <label for="{{ facet.option }}-sidebar" class="facet-labels">{{ facet.option }} ({{ facet.count}})
          </label>
        </div>
        <div ng-repeat="facet in facets.subject | filter:{active:false} | limitTo: 5" >
          <input type="checkbox" id="{{ facet.option }}-sidebar" ng-click="toggleFacet(facet)" ng-checked="{{ facet.active }}">
          <label for="{{ facet.option }}-sidebar" class="facet-labels">{{ facet.option }} ({{ facet.count}})
          </label>
        </div>
        <div ng-controller="FacetModalCtrl">
        <a ng-click="openFacetModal(facets, 'subject')" id="see-all-subject">See All</a>
        </div>
      </div>
    </div>
    <hr class="left_sidebar_hr">
    <div class="left_sidebar_accordion__tab">
      <div class="left_sidebar_accordion__tab-title" ng-click="openTab('creator')">
        <i class="glyphicon-plus glyphicon" ng-class="{'glyphicon-minus': isOpenTab('creator'), 'glyphicon-plus': !status.open}"></i>
        Creator
      </div>
      <div class="left_sidebar_accordion__tab-content" ng-show="isOpenTab('creator')">
        <div ng-repeat="facet in facets.creator | filter:{active:true}" >
          <input type="checkbox" id="{{ facet.option }}-sidebar" ng-click="toggleFacet(facet)" ng-checked="{{ facet.active }}">
          <label for="{{ facet.option }}-sidebar" class="facet-labels">{{ facet.option }} ({{ facet.count}})
          </label>
        </div>
        <div ng-repeat="facet in facets.creator | filter:{active:false} | limitTo: 5" >
          <input type="checkbox" id="{{ facet.option }}-sidebar" ng-click="toggleFacet(facet)" ng-checked="{{ facet.active }}">
          <label for="{{ facet.option }}-sidebar" class="facet-labels">{{ facet.option }} ({{ facet.count}})
          </label>
        </div>
        <div ng-controller="FacetModalCtrl">
        <a ng-click="openFacetModal(facets, 'creator')">See All</a>
        </div>
      </div>
    </div>
    <hr class="left_sidebar_hr">
    <div class="left_sidebar_accordion__tab">
      <div class="left_sidebar_accordion__tab-title" ng-click="openTab('language')">
        <i class="glyphicon-plus glyphicon" ng-class="{'glyphicon-minus': isOpenTab('language'), 'glyphicon-plus': !status.open}"></i>
        Language
      </div>
      <div class="left_sidebar_accordion__tab-content" ng-show="isOpenTab('language')">
        <div ng-repeat="facet in facets.language | filter:{active:true}" >
          <input type="checkbox" id="{{ facet.option }}-sidebar" ng-click="toggleFacet(facet)" ng-checked="{{ facet.active }}">
          <label for="{{ facet.option }}-sidebar" class="facet-labels">{{ facet.option }} ({{ facet.count}})
          </label>
        </div>
        <div ng-repeat="facet in facets.language | filter:{active:false} | limitTo: 5" >
          <input type="checkbox" id="{{ facet.option }}-sidebar" ng-click="toggleFacet(facet)" ng-checked="{{ facet.active }}">
          <label for="{{ facet.option }}-sidebar" class="facet-labels">{{ facet.option }} ({{ facet.count}})
          </label>
        </div>
        <div ng-controller="FacetModalCtrl">
        <a ng-click="openFacetModal(facets, 'language')">See All</a>
        </div>
      </div>
    </div>
    <hr class="left_sidebar_hr">
    <div class="left_sidebar_accordion__tab">
      <div class="left_sidebar_accordion__tab-title" ng-click="openTab('grp_contributor')">
        <i class="glyphicon-plus glyphicon" ng-class="{'glyphicon-minus': isOpenTab('grp_contributor'), 'glyphicon-plus': !status.open}"></i>
        Contributing Institution
      </div>
      <div class="left_sidebar_accordion__tab-content" ng-show="isOpenTab('grp_contributor')">
        <div ng-repeat="facet in facets.grp_contributor | filter:{active:true}" >
          <input type="checkbox" id="{{ facet.option }}-sidebar" ng-click="toggleFacet(facet)" ng-checked="{{ facet.active }}">
          <label for="{{ facet.option }}-sidebar" class="facet-labels">{{ facet.option }} ({{ facet.count}})
          </label>
        </div>
        <div ng-repeat="facet in facets.grp_contributor | filter:{active:false} | limitTo: 5" >
          <input type="checkbox" id="{{ facet.option }}-sidebar" ng-click="toggleFacet(facet)" ng-checked="{{ facet.active }}">
          <label for="{{ facet.option }}-sidebar" class="facet-labels">{{ facet.option }} ({{ facet.count}})
          </label>
        </div>
        <div ng-controller="FacetModalCtrl">
        <a ng-click="openFacetModal(facets, 'grp_contributor')">See All</a>
        </div>
      </div>
    </div>
    <hr class="left_sidebar_hr">
    <h5>Date range</h5>
    <div class="date-range"><p>From:</p><input type="date"></div>
      <div class="date-range"><p>To:</p><input type="date">
        <button ng-click="search()" class="btn" type="button" id="go-btn-results">></button>
      </div>
  </div>

  <!--Search Box & Options-->
  <div class="results-list">
    <div class="search-bar-results">
      <form ng-submit="newQuerySearch(newQueryTerm)">
        <div class="facet-chip-search-bar facet-search" focus-input >
          <ul class="facet-chip-list facet-search">
            <li class="facet-search" ng-if="queryTerm">
              <div class="facet-chip">
                <a class="facet-search" ng-click="clearQueryTerm()">{{queryTerm}} <i>(Keyword)</i> <span class="glyphicon glyphicon-remove-circle facet-search" style="color:white"></span> </a>
              </div>
            </li>
            <li class="facet-search" ng-repeat="activeFacet in activeFacets">
              <div class="facet-chip">
                <a class="facet-search" ng-click="updateFacet(activeFacet, false)">{{activeFacet.option}} <i>({{categories[activeFacet.facet].display}})</i> <span class="glyphicon glyphicon-remove-circle facet-search" style="color:white"></span> </a>
              </div>
            </li>
            <li class="facet-search" ng-repeat="advancedField in advancedFields">
              <div class="facet-chip">
                <a ng-click="clearAdvancedField(advancedField)"> {{ advancedField.term }} <i>(Keyword: {{ advancedField.field.display }})</i> <span class="glyphicon glyphicon-remove-circle" style="color:white"></span></a>
              </div>
            </li>
            <li>
              <input autofocus class="facet-search" ng-model="newQueryTerm" id="facet-chip-input" type="text" adjust-size>
            </li>
          </ul>
        </div>
        <button  class="btn" type="submit" id="go-btn-results"><span class="glyphicon glyphicon-search"></span>
        </button>
      </form>
    </div>

    <div class="dropdown results-top" uib-dropdown>
      <button class="btn btn-primary search-dropdown dropdown-toggle" uib-dropdown-toggle type="button" id="toggle-sort-btn">Sort by: {{ sort }}
        <span class="caret"></span>
      </button>
      <ul uib-dropdown-menu role="menu" class="dropdown-menu">
        <li ng-repeat="sortMode in validSortModes">
          <a ng-click="setSortMode(sortMode)">{{ sortMode.display }}</a></li>
      </ul>
      <!--pageSize-related logic to never display more than total number of results. handles edge cases.-->
      <span class="showing" ng-show="numTotalHits === 0">No results found</span>
      <span class="showing" ng-show="numTotalHits > 0 && pagination.from <= numTotalHits">Showing {{(pagination.from + 1)}} - {{((pagination.from + pagination.size) < numTotalHits) ? (pagination.from + pagination.size) : numTotalHits}} of {{numTotalHits}} results</span>
      <span class="showing" ng-show="pagination.from > numTotalHits">No More Results</span>
      <div class="btn-group" uib-dropdown>
        <button class="btn btn-primary search-dropdown" type="button" uib-dropdown-toggle>Show: {{pagination.size}}<span class="caret"></span>
        </button>
        <ul class="uib-dropdown-menu"  role="menu">
          <li ng-repeat="pageSizeOption in validPageSizeOptions">
            <a ng-click="setPageSize(pageSizeOption)">{{pageSizeOption}}</a>
          </li>
        </ul>
      </div>
      <div class="results-pagination-top">
        <dir-pagination-controls on-page-change="setPageNum(newPageNumber)" boundary-links="true" max-size="5"></dir-pagination-controls>
      </div>
    </div>

    <hr class="results-list-hr">
    <!--Search Results Data-->
    <li dir-paginate="book in hits | itemsPerPage: pagination.size" current-page="pagination.page" total-items="numTotalHits"  class="book-listing">
      <a ui-sref="#"><i class="glyphicon-bookmark glyphicon"></i></a>
      <a ng-href="{{book._record_link}}" target="_blank">{{book._title_display}}</a>
      <b ng-show="book._creator_display"><br/>Creator: </b>{{book._creator_display}}
      <b ng-show="book._date_display"><br/>Date: </b>{{book._date_display}}
      <b ng-show="book._edition"><br/>Edition: </b>{{book._edition}}
      <b><br/>Contributing Institution: </b>{{book._grp_contributor}}<br/>
      <a class="portal-record-link" ng-href="{{book._record_link}}" target="_blank">View Digital Item</a><br/>
      <hr class="results-list-hr"><br>
    </li>
    </ul>
    <!--Pagination-->
    <div class="results-pagination">
      <dir-pagination-controls on-page-change="setPageNum(newPageNumber)" boundary-links="true" max-size="5"></dir-pagination-controls>
    </div>
  </div>
</div>
